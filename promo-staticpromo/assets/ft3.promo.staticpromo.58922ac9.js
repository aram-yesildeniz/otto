!function(){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var TrackingService=function(){function t(){_classCallCheck(this,t),this.tracker=window.o_tracking,this.tracker.bct||(this.tracker.bct={sendMergeToTrackingServer:function(){},sendEventToTrackingServer:function(){},submitMove:function(){}})}return _createClass(t,[{key:"sendClickTrackingEvent",value:function(t,e,r,n,o,i,a){var c=this._buildClickTrackingPayload(t,e,r,n,o,i,a,"click");this.tracker.bct.submitMove(c)}},{key:"sendClickTrackingEventForPopup",value:function(t,e,r,n,o,i,a){var c=this._buildClickTrackingPayload(t,e,r,n,o,i,a,"click");this.tracker.bct.sendEventToTrackingServer(c)}},{key:"sendViewTrackingEvent",value:function(t,e,r,n,o,i){for(var a=[],c=0;c<o;++c)a.push(this._getEventAsString(e[c],r,n,o,c+1,i[c],"view"));var u={};u["promo_"+t]=a.join("|"),this.tracker.bct.sendMergeToTrackingServer(u)}},{key:"_buildClickTrackingPayload",value:function(t,e,r,n,o,i,a,c){var u={},s=this._getEventAsString(e,r,n,o,i,a,c);return u["promo_"+t]=s,u["wk.promo_Attribution"]="promo_"+t+"∞"+s,u}},{key:"_getEventAsString",value:function(t,e,r,n,o,i,a){var c=r+1;return t&&t.length>200&&(t=t.substring(0,200)),t+"∞"+e+"$"+c+"∞"+n+"∞"+o+"∞"+i+"∞"+a}}]),t}(),PromoStaticPromo=function(){function PromoStaticPromo(){_classCallCheck(this,PromoStaticPromo)}return _createClass(PromoStaticPromo,[{key:"trackClick",value:function(t,e,r,n){var o=this.findParentContainer(t),i=this.getPromoType(o),a=this.getDestinationUrl(t),c=this.getFeatureOrder(o),u=this.getFeatureIndex(o),s=this.isPopupLink(t),l=new TrackingService;s?l.sendClickTrackingEventForPopup(i,a,c,u,n,r+1,e):l.sendClickTrackingEvent(i,a,c,u,n,r+1,e)}},{key:"getDestinationUrl",value:function(t){var e=t.querySelector(".js_uni50teasertracking");return e?window.atob(e.getAttribute("data-promo-content")):"emptyTarget"}},{key:"isPopupLink",value:function(t){return null!==t.querySelector(".js_openInPopup")}},{key:"trackView",value:function(t){var e=this.getPromoType(t),r=this.getAllDestinationUrls(t,e),n=this.getFeatureOrder(t),o=this.getFeatureIndex(t),i=this.getSourceUrls(t,e),a=i.length;(new TrackingService).sendViewTrackingEvent(e,r,n,o,a,i)}},{key:"getPromoType",value:function(t){return t.getAttribute("data-promo-type")}},{key:"getAllDestinationUrls",value:function(t,e){if("StaticPromotion"===e){var r=t.querySelectorAll(".js_uni50teasertracking");return[].map.call(r,(function(t){return window.atob(t.getAttribute("data-promo-content"))}))}return"PanoramaTeaser"===e?[this.getDestinationUrl(t)]:["n/a"]}},{key:"getFeatureOrder",value:function(t){return parseInt(t.parentElement.getAttribute("data-feature-order"),0)}},{key:"getFeatureIndex",value:function(t){return parseInt(t.getAttribute("data-feature-index"),0)}},{key:"getSourceUrls",value:function getSourceUrls(container,promoType){if("StaticPromotion"===promoType){var urlsAsJson=container.getAttribute("data-urls-as-json");return null!==urlsAsJson?eval(urlsAsJson):["n/a"]}var url=container.getAttribute("data-url");return null!==url?[url]:["n/a"]}},{key:"findParentContainer",value:function(t){for(;!t.classList.contains("promo_staticpromo-container")&&(t=t.parentElement););return t}}]),PromoStaticPromo}();function initPromoStaticpromo(){var t=document.getElementsByClassName("promo_staticpromo-container");[].forEach.call(t,(function(t){"true"!==t.getAttribute("data-tracked")&&(t.setAttribute("data-tracked","true"),window.o_promo_staticpromo.trackView(t))}))}window.o_promo_staticpromo=new PromoStaticPromo,window.o_global.eventLoader.onLoad(95,(function(){initPromoStaticpromo()}))}();
//# sourceMappingURL=/promo-staticpromo/assets/ft3.promo.staticpromo.58922ac9.js.map
