!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}var n=function(){function t(){e(this,t)}return o(t,null,[{key:"group",value:function(e){window.o_global.debug.status().activated&&console.group(e)}},{key:"groupEnd",value:function(){window.o_global.debug.status().activated&&console.groupEnd()}},{key:"log",value:function(e){window.o_global.debug.status().activated&&console.log(e)}},{key:"info",value:function(e){if(window.o_global.debug.status().activated){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];console.info(e,o)}}},{key:"warn",value:function(e){if(window.o_global.debug.status().activated){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];console.warn(e,o)}}},{key:"table",value:function(e){window.o_global.debug.status().activated&&console.table(e)}},{key:"count",value:function(e){window.o_global.debug.status().activated&&console.count(e)}}]),t}(),r=function(){function t(){e(this,t)}return o(t,[{key:"loadAllTheModules",value:function(e){var o=e.querySelectorAll("[data-module-url]");window.o_global.debug.status().activated&&t.report(e),[].forEach.call(o,(function(e){var t=e.getAttribute("data-module-url");o_util.ajax({url:t,method:"GET",headers:window.o_promo_aggregation&&window.o_promo_aggregation.headers||{},timeout:7500},(function(t){if(200===t.status){var o=o_util.dom.stringToDocumentFragment(t.responseText);if(null!=o){var r=e.parentNode;r&&(r.replaceChild(o,e),r.querySelectorAll("script").length>0&&(n.warn("executeInlineScript for module: ".concat(r.getAttribute("data-module-type"))),o_util.hardcore.executeInlineScripts(r)),n.log("preload_polyfill_invoke for module: ".concat(r.getAttribute("data-module-type"))),preload_polyfill_invoke(r))}}else e.parentNode.removeChild(e)}))}))}},{key:"setCookie",value:function(e,t,o){var n=new Date;n.setTime(n.getTime()+1e3*o);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/; secure"}},{key:"init",value:function(){if(window.o_promo_aggregation&&window.o_promo_aggregation.cookie){var e=window.o_promo_aggregation.cookie;this.setCookie(e.key,e.value,e.expireSeconds)}this.loadAllTheModules(document.getElementsByClassName("promo-module-container")[0])}}],[{key:"report",value:function(e){var t=e.querySelectorAll(".promo-module-prefetched"),o=e.querySelectorAll(".promo-module-async");var r=[].map.call(o,(function(e){return e.getAttribute("data-module-type")})),a=[].map.call(t,(function(e){return e.getAttribute("data-module-type")}));n.group("[FT3 promo aggregation]"),n.info("%cModule Aggregation","font-weight: bold; color:red"),n.info("%cPrefetched","font-weight: bold; color:red"),n.table(a),n.info("%cAsynchronously loaded","font-weight: bold; color:red"),n.table(r),n.groupEnd()}}]),t}(),a=function(){function t(){e(this,t)}return o(t,[{key:"init",value:function(){var e=this;[].forEach.call(document.querySelectorAll("[data-module-type]"),(function(t){return e.addOnClickListener(t)}));var t=window.history.state;t&&t.featureOrder&&(window.history.scrollRestoration="manual",this.scrollToFeatureAfterPageIsLoaded(t.featureOrder),this.removeState())}},{key:"addOnClickListener",value:function(e){var t=this;e.addEventListener("click",(function(){t.storeClickPosition(e)}))}},{key:"scrollToFeatureAfterPageIsLoaded",value:function(e){var t=this,o=0,n=setInterval((function(){o>20&&(clearInterval(n),t.scrollToFeature(e)),[].some.call(document.querySelectorAll(".promo-module-hidden"),(function(t){return t.parentElement.getAttribute("data-feature-order")<e}))||(clearInterval(n),t.scrollToFeature(e)),o++}),100)}},{key:"scrollToFeature",value:function(e){document.querySelector("[data-feature-order='"+e+"']").scrollIntoView({behavior:"smooth"})}},{key:"storeClickPosition",value:function(e){window.history.pushState({featureOrder:e.getAttribute("data-feature-order")},"entrypageScrollPosition")}},{key:"removeState",value:function(){window.history.pushState(null,"entrypageScrollPosition")}}]),t}(),l=function(){function t(){e(this,t);var o=document.querySelector("[data-togglz]"),n=o&&o.getAttribute("data-togglz")||"{}";this._togglz=JSON.parse(n)}return o(t,[{key:"isActive",value:function(e){return this._togglz[e]||!1}}]),t}();o_global.eventLoader.onLoad(90,(function(){(new r).init(),(new l).isActive("SCROLL_TO_LAST_POSITION_ON_BROWSER_BACK")&&(new a).init()}))}();
//# sourceMappingURL=/promo-aggregation/assets/ft3.promo.aggregation.22358cf2.js.map
