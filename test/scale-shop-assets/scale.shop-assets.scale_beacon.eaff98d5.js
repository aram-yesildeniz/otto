!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var i="rum_";function n(e){return null===e||0===Object.keys(e).length}function r(e,t,i){!n(e)&&function(e){return o_util&&o_util.toggle&&o_util.toggle.get(e,!1)}(i)&&(e.requestTime=Date.now(),!1===navigator.sendBeacon(t,JSON.stringify(e))&&console.error("Failed to send beacon to ".concat(t,"!")))}function o(e){var t=0,n="";return e.substr(0,i.length)===i&&(t=i.length,n=i),n+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e.slice(t))}function s(e){var t={};return Object.keys(e).forEach((function(n){var r;t[(r=o(n),r.substr(0,i.length)===i?r:"".concat(i).concat(r))]=e[n]})),t}var a=["rum_FirstPaint","rum_FirstContentfulPaint"],u=["rum_FirstInputDelay"];function c(e){n(e)||(o_global&&o_global.eventQBus?o_global.eventQBus.emit("tracking.bct.addToPageImpression",e):o_tracking&&o_tracking.bct&&o_tracking.bct.sendMergeToTrackingServer&&o_tracking.bct.sendMergeToTrackingServer(e))}var f="/scale-beacon-service/userTiming",d="SCALE_SendUserTimings",l={deviceBrowser:"unknown",deviceOS:"unknown",rum_deviceType:"unknown"},h="unknown",p=["Artikeldetailseite","Einstiegsseite","Errorseite404","Merkzettel","Produktliste","Storefront","Suchergebnisseite","User"];function g(e){var t=[];return n(e)||Object.keys(e).forEach((function(i){t.push({metricName:i,value:e[i]})})),t}function m(e){return t({},{rumMetrics:g(e)},l,AS&&AS.RUM&&AS.RUM.getDeviceData?AS.RUM.getDeviceData():{},{pageCluster:(i=h,o_util&&o_util.misc&&o_util.misc.getPagecluster&&-1!=p.indexOf(o_util.misc.getPagecluster())&&(i=o_util.misc.getPagecluster()),i),beaconType:"userTiming"});var i}function v(e){n(e)||r(m(e),f,d)}var y="/scale-beacon-service/rum",b="SCALE_SendRumData",w={CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",SAFARI:"Safari"},T="unclassified",k="undefined",_=["dnsTime","domContentLoaded","domContentLoadedStart","domTime","htmlLength","inlineScripts","networkTime","resourceCount","rum_complete","rum_domComplete","sslHandshakeTime","timeToFirstByte","timeToFirstPaint"];function P(e){var t=[];return _.forEach((function(i){var n=e[i];void 0!==n&&t.push({metricName:i,value:n})})),t}function S(e){if(void 0===e)return k;var t=w[e.toUpperCase()];return void 0!==t?t:T}var C=function(e,t,i){this.name=e,this.version=t,this.os=i},M=function(e){this.version=e,this.name="node",this.os=process.platform},O=function(){this.bot=!0,this.name="bot",this.version=null,this.os=null},D=3,W=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],x=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function B(){return"undefined"!=typeof navigator?function(e){var t=""!==e&&W.reduce((function(t,i){var n=i[0],r=i[1];if(t)return t;var o=r.exec(e);return!!o&&[n,o]}),!1);if(!t)return null;var i=t[0],n=t[1];if("searchbot"===i)return new O;var r=n[1]&&n[1].split(/[._]/).slice(0,3);return r?r.length<D&&(r=r.concat(new Array(D-r.length).fill("0"))):r=[],new C(i,r.join("."),function(e){var t=x.find((function(t){return t[0],t[1].test(e)}));return t?t[0]:null}(e))}(navigator.userAgent):"undefined"!=typeof process&&process.version?new M(process.version.slice(1)):null}var F,E,R,A,I=function(){return+new Date},N="function"==typeof window.requestIdleCallback,L=function(){function e(e){this.initTime_=e}return Object.defineProperty(e.prototype,"didTimeout",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.timeRemaining=function(){return Math.max(0,50-(I()-this.initTime_))},e}(),H=N?window.requestIdleCallback:function(e){var t=new L(I());return setTimeout((function(){return e(t)}),0)},V=N?window.cancelIdleCallback:function(e){clearTimeout(e)},j="function"==typeof Promise&&Promise.toString().indexOf("[native code]")>-1,Q="MutationObserver"in window||"WebKitMutationObserver"in window||"MozMutationObserver"in window,q=j?function(e){Promise.resolve().then(e)}:Q?(F=0,E=[],R=new MutationObserver((function(){E.forEach((function(e){return e()})),E=[]})),A=document.createTextNode(""),R.observe(A,{characterData:!0}),function(e){E.push(e),A.data=String(++F%2)}):function(e){},X=0,U=!("object"!=e(window.safari)||!window.safari.pushNotification),$=function(){function e(e){var t=void 0===e?{}:e,i=t.ensureTasksRun,n=void 0!==i&&i,r=t.defaultMinTaskTime,o=void 0===r?X:r;this.taskQueue_=[],this.isProcessing_=!1,this.state_=null,this.idleCallbackHandle_=null,this.taskQueue_=[],this.isProcessing_=!1,this.state_=null,this.defaultMinTaskTime_=o,this.ensureTasksRun_=n,this.runTasksImmediately=this.runTasksImmediately.bind(this),this.runTasks_=this.runTasks_.bind(this),this.onVisibilityChange_=this.onVisibilityChange_.bind(this),this.ensureTasksRun_&&(addEventListener("visibilitychange",this.onVisibilityChange_,!0),U&&addEventListener("beforeunload",this.runTasksImmediately,!0))}return e.prototype.pushTask=function(e){this.addTask_(Array.prototype.push,e)},e.prototype.unshiftTask=function(e){this.addTask_(Array.prototype.unshift,e)},e.prototype.runTasksImmediately=function(){this.runTasks_()},e.prototype.hasPendingTasks=function(){return this.taskQueue_.length>0},e.prototype.clearPendingTasks=function(){this.taskQueue_=[],this.cancelScheduledRun_()},e.prototype.getState=function(){return this.state_},e.prototype.destroy=function(){this.taskQueue_=[],this.cancelScheduledRun_(),this.ensureTasksRun_&&(removeEventListener("visibilitychange",this.onVisibilityChange_,!0),U&&removeEventListener("beforeunload",this.runTasksImmediately,!0))},e.prototype.addTask_=function(e,t,i){var n=(void 0===i?{}:i).minTaskTime,r=void 0===n?this.defaultMinTaskTime_:n,o={time:I(),visibilityState:document.visibilityState};e.call(this.taskQueue_,{state:o,task:t,minTaskTime:r}),this.scheduleTasksToRun_()},e.prototype.scheduleTasksToRun_=function(){this.ensureTasksRun_&&"hidden"===document.visibilityState?q(this.runTasks_):this.idleCallbackHandle_||(this.idleCallbackHandle_=H(this.runTasks_))},e.prototype.runTasks_=function(e){if(this.cancelScheduledRun_(),!this.isProcessing_){for(this.isProcessing_=!0;this.hasPendingTasks()&&!K(e,this.taskQueue_[0].minTaskTime);){var t=this.taskQueue_.shift(),i=t.task,n=t.state;this.state_=n,i(n),this.state_=null}this.isProcessing_=!1,this.hasPendingTasks()&&this.scheduleTasksToRun_()}},e.prototype.cancelScheduledRun_=function(){V(this.idleCallbackHandle_),this.idleCallbackHandle_=null},e.prototype.onVisibilityChange_=function(){"hidden"===document.visibilityState&&this.runTasksImmediately()},e}(),K=function(e,t){return!!(e&&e.timeRemaining()<=t)},G=function(){function e(e){this.config=e}return e.prototype.now=function(){return Date.now()/1e3},e.prototype.mark=function(e,t){},e.prototype.measure=function(e,t){return this.getDurationByMetric(e,t)},e.prototype.firstContentfulPaint=function(e){var t=this;setTimeout((function(){e(t.getFirstPaint())}))},e.prototype.getDurationByMetric=function(e,t){return t.end-t.start||0},e.prototype.getFirstPaint=function(){var e=window.performance.timing,t={duration:0,entryType:"paint",name:"first-contentful-paint",startTime:0};return e&&0!==e.navigationStart&&(t.startTime=Date.now()-e.navigationStart),[t]},e}(),z=function(){function e(e){this.config=e}return e.supported=function(){return window.performance&&!!performance.now&&!!performance.mark},e.supportedPerformanceObserver=function(){return window.chrome&&"PerformanceObserver"in window},e.prototype.now=function(){return window.performance.now()},e.prototype.mark=function(e,t){var i="mark_"+e+"_"+t;window.performance.mark(i)},e.prototype.measure=function(e,t){var i="mark_"+e+"_start",n="mark_"+e+"_end";return window.performance.measure(e,i,n),this.getDurationByMetric(e,t)},e.prototype.firstContentfulPaint=function(e){this.perfObserver=new PerformanceObserver(this.performanceObserverCb.bind(this,e)),this.perfObserver.observe({entryTypes:["paint"]})},e.prototype.getDurationByMetric=function(e,t){var i=this.getMeasurementForGivenName(e);return i&&"measure"===i.entryType?i.duration:-1},e.prototype.getMeasurementForGivenName=function(e){var t=window.performance.getEntriesByName(e);return t[t.length-1]},e.prototype.performanceObserverCb=function(e,t){var i=this,n=t.getEntries();e(n),n.forEach((function(e){i.config.firstContentfulPaint&&"first-contentful-paint"===e.name&&i.perfObserver.disconnect()}))},e}(),J=function(){function e(e){var i=this;void 0===e&&(e={}),this.config={firstContentfulPaint:!1,firstPaint:!1,firstInputDelay:!1,googleAnalytics:{enable:!1,timingVar:"name"},browserTracker:!1,logPrefix:"Perfume.js:",logging:!0,maxMeasureTime:15e3,warning:!1,debugging:!1},this.firstPaintDuration=0,this.firstContentfulPaintDuration=0,this.firstInputDelayDuration=0,this.isHidden=!1,this.logMetricWarn="Please provide a metric name",this.metrics={},this.observers={},this.didVisibilityChange=function(){document.hidden&&(i.isHidden=document.hidden)},this.config=t({},this.config,e),this.perf=z.supported()?new z(this.config):new G(this.config),this.config.browserTracker&&(this.browser=B()),z.supportedPerformanceObserver()||(this.perfEmulated=new G(this.config)),(this.config.firstPaint||this.config.firstContentfulPaint)&&(this.observeFirstContentfulPaint=new Promise((function(e){i.logDebug("observeFirstContentfulPaint"),i.observers.fcp=e,i.initFirstPaint()}))),this.config.firstInputDelay&&(this.observeFirstInputDelay=new Promise((function(e){i.observers.fid=e,i.initFirstInputDelay()}))),this.onVisibilityChange(),this.queue=new $({ensureTasksRun:!0})}return e.prototype.start=function(e){this.checkMetricName(e)&&(this.metrics[e]?this.logWarn(this.config.logPrefix,"Recording already started."):(this.metrics[e]={end:0,start:this.perf.now()},this.perf.mark(e,"start"),this.isHidden=!1))},e.prototype.end=function(e){var t=this;if(this.checkMetricName(e)){var i=this.metrics[e];if(i){i.end=this.perf.now(),this.perf.mark(e,"end");var n=this.perf.measure(e,i),r=parseFloat(n.toFixed(2));return delete this.metrics[e],this.queue.pushTask((function(){t.log(e,r),t.sendTiming(e,r)})),r}this.logWarn(this.config.logPrefix,"Recording already stopped.")}},e.prototype.endPaint=function(e){var t=this;return new Promise((function(i){setTimeout((function(){var n=t.end(e);i(n)}))}))},e.prototype.log=function(e,t){if(!this.isHidden&&this.config.logging)if(e){var i=t.toFixed(2),n="%c "+this.config.logPrefix+" "+e+" "+i+" ms";window.console.log(n,"color: #ff6d00;font-size:11px;")}else this.logWarn(this.config.logPrefix,this.logMetricWarn)},e.prototype.logDebug=function(e,t){void 0===t&&(t=""),this.config.debugging&&window.console.log("Perfume.js debugging "+e+":",t)},e.prototype.sendTiming=function(e,t){if(!this.isHidden){var i=this.config.browserTracker?this.browser:void 0,n=this.addBrowserToMetricName(e);if(this.config.analyticsTracker&&this.config.analyticsTracker(e,t,i),this.config.googleAnalytics.enable)if(window.ga){var r=Math.round(t);window.ga("send","timing",n,this.config.googleAnalytics.timingVar,r)}else this.logWarn(this.config.logPrefix,"Google Analytics has not been loaded")}},e.prototype.addBrowserToMetricName=function(e){if(!this.config.browserTracker)return e;var t=e;return this.browser.name&&(t+="."+this.browser.name.replace(/\s/g,""),this.browser.os&&(t+="."+this.browser.os.replace(/\s/g,""))),t},e.prototype.checkMetricName=function(e){return!!e||(this.logWarn(this.config.logPrefix,this.logMetricWarn),!1)},e.prototype.firstContentfulPaintCb=function(e){var t=this;this.logDebug("firstContentfulPaintCb",e),e.forEach((function(e){t.queue.pushTask((function(){t.config.firstPaint&&"first-paint"===e.name&&t.logMetric(e.startTime,"First Paint","firstPaint"),t.config.firstContentfulPaint&&"first-contentful-paint"===e.name&&t.logMetric(e.startTime,"First Contentful Paint","firstContentfulPaint")}))}))},e.prototype.initFirstPaint=function(){if(this.logDebug("initFirstPaint"),z.supportedPerformanceObserver()){this.logDebug("initFirstPaint.supportedPerformanceObserver");try{this.perf.firstContentfulPaint(this.firstContentfulPaintCb.bind(this))}catch(e){this.logWarn(this.config.logPrefix,"initFirstPaint failed")}}else this.perfEmulated&&(this.logDebug("initFirstPaint.perfEmulated"),this.perfEmulated.firstContentfulPaint(this.firstContentfulPaintCb.bind(this)))},e.prototype.initFirstInputDelay=function(){var e=this;z.supported()&&this.config.firstInputDelay&&perfMetrics.onFirstInputDelay((function(t,i){e.queue.pushTask((function(){e.logMetric(t,"First Input Delay","firstInputDelay")}))}))},e.prototype.onVisibilityChange=function(){void 0!==document.hidden&&document.addEventListener("visibilitychange",this.didVisibilityChange)},e.prototype.logMetric=function(e,t,i){var n=parseFloat(e.toFixed(2));n>this.config.maxMeasureTime||("firstPaint"===i&&(this.firstPaintDuration=n),"firstContentfulPaint"===i&&(this.firstContentfulPaintDuration=n,this.observers.fcp(n)),"firstInputDelay"===i&&(this.firstInputDelayDuration=n,this.observers.fid(n)),this.log(t,n),this.sendTiming(i,n))},e.prototype.logWarn=function(e,t){this.config.warning&&this.config.logging&&window.console.warn(e,t)},e}();!function(e,t){var i,n,r,o=[],s={passive:!0,capture:!0},a=new Date,u="pointerup",c="pointercancel";function f(e,o){i||(i=o,n=e,r=new Date,h(t),d())}function d(){n>=0&&n<r-a&&(o.forEach((function(e){e(n,i)})),o=[])}function l(i){if(i.cancelable){var n=(i.timeStamp>1e12?new Date:performance.now())-i.timeStamp;"pointerdown"==i.type?function(i,n){function r(){f(i,n),a()}function o(){a()}function a(){t(u,r,s),t(c,o,s)}e(u,r,s),e(c,o,s)}(n,i):f(n,i)}}function h(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach((function(t){e(t,l,s)}))}h(e),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(e){o.push(e),d()}}(addEventListener,removeEventListener),new J({firstPaint:!0,firstContentfulPaint:!0,firstInputDelay:!0,logPrefix:"[Q-PSR Metrics] ",logging:!1,maxMeasureTime:6e4,analyticsTracker:function(e,t,r){var s,f,d,l=o(e),h="".concat(i).concat(l),p=(s={},f=h,d=Math.round(t),f in s?Object.defineProperty(s,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[f]=d,s);a.some((function(e){return e===h}))?(v(p),c(p)):u.some((function(e){return e===h}))&&(v(p),function(e){n(e)||(o_global&&o_global.eventQBus?o_global.eventQBus.emit("tracking.bct.submitEvent",e):o_tracking&&o_tracking.bct&&o_tracking.bct.sendEventToTrackingServer&&o_tracking.bct.sendEventToTrackingServer(e))}(p))}}),function(e){var t="navigator"in e&&"sendBeacon"in e.navigator,i=function(e,t){var i="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("POST",e,!1),i.withCredentials=!0,i.setRequestHeader("Accept","*/*"),"string"==typeof t?(i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),i.responseType="text/plain"):"[object Blob]"==={}.toString.call(t)&&t.type&&i.setRequestHeader("Content-Type",t.type);try{i.send(t)}catch(e){}return!0};t&&(i=navigator.sendBeacon.bind(navigator)),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.sendBeacon=i):"function"==typeof define&&define.amd?define([],(function(){return i})):t||(e.navigator.sendBeacon=i)}("object"===("undefined"==typeof window?"undefined":e(window))?window:void 0),window.o_scale=window.o_scale||{},window.o_scale.userTiming={sendBeacon:function(e){n(e)||(r(m(e),f,d),c(e))}},window.o_scale.rum={sendData:function(e){var t,i,o;n(e)||(c(s((i=e,o={},Object.keys(i).filter((function(e){return"rum_"===e.substr(0,4)})).forEach((function(e){return o[e]=i[e]})),o))),r({deviceBrowser:S((t=e).deviceBrowser),deviceOS:void 0!==t.deviceOS?t.deviceOS:k,pageCluster:"string"==typeof t.pagecluster?t.pagecluster:"undefined",rum_deviceOrientation:void 0!==t.rum_deviceOrientation?t.rum_deviceOrientation:k,rum_deviceType:void 0!==t.rum_deviceType?t.rum_deviceType:k,rum_domComplete:t.rum_domComplete,beaconType:"rum",rumMetrics:P(t)},encodeURI(y),b))}}}();
//# sourceMappingURL=/scale-shop-assets/scale.shop-assets.scale_beacon.eaff98d5.js.map
